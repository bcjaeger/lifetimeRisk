% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pie.r
\name{pie}
\alias{pie}
\title{Calculate and Plot Lifetime Risk}
\usage{
pie(
  data,
  min_age,
  max_age,
  age_group_width,
  group,
  level1,
  level2,
  age_free,
  o1 = NULL,
  o2 = NULL,
  study_label = "Lifetime Risk Study",
  min_age_group = min_age,
  verbose = FALSE
)
}
\arguments{
\item{data}{A data frame containing the input data. It should have the following columns:
\itemize{
\item ids: Unique identifier for each individual
\item entryage: Age at which the individual entered the study
\item survage: Age at which the individual was last observed (due to event occurrence or end of follow-up)
\item status: Indicator for the primary event of interest (1 if occurred, 0 if not)
\item astatus: Indicator for a competing event (1 if occurred, 0 if not)
\item group: Categorical variable indicating which group the individual belongs to
}}

\item{min_age}{Minimum age to consider in the analysis}

\item{max_age}{Maximum age to consider in the analysis}

\item{age_group_width}{Width of age groups for aggregating data}

\item{group}{Name of the column in 'data' that contains the group information}

\item{level1}{First level of the group variable to analyze}

\item{level2}{Second level of the group variable to analyze}

\item{age_free}{Minimum age to consider for lifetime risk calculations}

\item{o1}{Output file name for the plot of the first group (level1). If NULL, plot is not saved.}

\item{o2}{Output file name for the plot of the second group (level2). If NULL, plot is not saved.}

\item{study_label}{Label to use in plot titles. Default is "Lifetime Risk Study"}

\item{min_age_group}{Minimum age group to consider in the analysis. Default is the same as min_age}

\item{verbose}{Logical, if TRUE, print detailed output. Default is FALSE.}
}
\value{
A list of class "pie_lifetime_risk" containing:
\itemize{
\item incidence_data: List of incidence rate data for both groups and combined
\itemize{
\item i: Combined incidence data
\item i1: Incidence data for level1
\item i2: Incidence data for level2
}
\item aa2g_result: Age-adjusted incidence rates
\item lr_data: List of lifetime risk data for both groups
\itemize{
\item lr1: Lifetime risk data for level1
\item lr2: Lifetime risk data for level2
}
\item plots: List of ggplot objects for both groups
\itemize{
\item plot1: Plot for level1
\item plot2: Plot for level2
}
\item parameters: List of input parameters used in the analysis
}
}
\description{
This function calculates and plots incidence rates for two groups based on the provided data.
}
\examples{
\dontrun{
# Basic usage
result <- pie(
  data = sample_data,
  min_age = 30,
  max_age = 90,
  age_group_width = 5,
  group = "group",
  level1 = "A",
  level2 = "B",
  age_free = 30
)

# Print summary of results
summary(result)

# Access specific components of the result
result$lr_data$lr1  # Lifetime risk data for level1
result$plots$plot1  # ggplot object for level1

# Save plots with custom names
result <- pie(
  data = sample_data,
  min_age = 30,
  max_age = 90,
  age_group_width = 5,
  group = "group",
  level1 = "A",
  level2 = "B",
  age_free = 30,
  o1 = "plot_group_A.png",
  o2 = "plot_group_B.png"
)

# Run with verbose output and custom study label
result <- pie(
  data = sample_data,
  min_age = 30,
  max_age = 90,
  age_group_width = 5,
  group = "group",
  level1 = "A",
  level2 = "B",
  age_free = 30,
  study_label = "My Custom Study",
  verbose = TRUE
)

# Print lifetime risk data for level1
print_lr_data(result, group = "level1")

# Export adjusted lifetime risk data for level2 to CSV
print_lr_data(result, group = "level2", adjusted = TRUE, output = "risk_data_B.csv")
}

}
